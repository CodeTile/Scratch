@rendermode InteractiveServer
@namespace DonutChartSolution.Components.Shared
@inject NavigationManager Navigation

<div class="donut-chart-container"
     style="--donut-thickness:@(Thickness ?? 40)">

    <svg class="donut-chart-svg"
         width="@Width"
         height="@Height"
         viewBox="0 0 200 200"
         @onmouseleave="ClearHover">

        @if (!string.IsNullOrWhiteSpace(Title))
        {
            <g>
                <text x="100"
                      y="20"
                      text-anchor="middle"
                      class="donut-title">
                    @Title
                </text>
            </g>
        }

        <g class="donut-slices">
            @foreach (var slice in Slices)
            {
                <path d="@slice.PathData"
                      fill="@slice.Color"
                      class="donut-slice"
                      @onclick="() => OnSliceClick(slice)"
                      @onmouseover="() => OnSliceHover(slice)">
                </path>
            }
        </g>

        <g class="donut-center"
           @onclick="OnCenterClick"
           @onmouseover="OnCenterHover">

            @if (IsDonut)
            {
                <circle cx="100"
                        cy="100"
                        r="@InnerRadius"
                        class="donut-center-circle" />
            }

            @if (!string.IsNullOrWhiteSpace(InnerTitle))
            {
                <g>
                    <text x="100"
                          y="95"
                          text-anchor="middle"
                          class="donut-inner-title">
                        @InnerTitle
                    </text>
                </g>
            }

            @if (!string.IsNullOrWhiteSpace(InnerText))
            {
                <g>
                    <text x="100"
                          y="115"
                          text-anchor="middle"
                          class="donut-inner-text">
                        @InnerText
                    </text>
                </g>
            }
        </g>
    </svg>

    @if (ShowTooltip)
    {
        <div class="donut-tooltip">
            <div class="donut-tooltip-title">@TooltipLabel</div>
            <div class="donut-tooltip-value">@TooltipValue</div>
        </div>
    }
</div>
